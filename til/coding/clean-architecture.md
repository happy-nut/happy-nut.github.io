# Clean Architecture

비지니스 규칙을 외부 구현으로부터 분리하여 시스템을 유연하고 테스트 가능하게 만드는 것이 핵심이다.

## 모듈 구조

모듈로 나누어야 할 지, 패키지로 나누어야 할 지 구분은 다음 질문으로 한다.

> 이 코드는 다른 팀/서비스에서도 재사용이 가능한가

굳이 다른 팀이나 서비스에서 재사용되는 코드가 아니라면 모듈로 나눌 필요는 없다고 생각하지만,
팀 내에서 조금 더 명확한 분리를 위해 모듈로 의존성을 나누고 싶다면 그렇게 해도 큰 상관은 없다.

## 패키지 구조

패키지 구조에서는 비지니스와 그 외적인 부분을 분리할 수 있도록 한다.

```bash
├── app
└── infra
```

`app` 에는 비지니스 관련 코드들을 담고, `infra` 에는 API, Message Queue, Cache 등의 configuration 코드들을 넣는다.
`infra` 는 비지니스를 서포트하는 부분들이라고 보면 된다.

## 여러 도메인을 담당하는 경우

하나의 도메인은 여러 서브 도메인(user, order 등)으로 찢어질 수 있는데, 이렇게
여러 도메인을 담당하는 경우에는 `app` 안에서 도메인을 나눈다.

```bash
├── app
│   ├── domain A
│   ├── domain B 
│   └── domain C
└── infra
```

## 각 도메인 패키지 구조

각 도메인의 패키지 구조는 다음과 같이 한다.

```bash
├── app
│   ├── domain A
│   │   ├── adapters
│   │   ├── usecases
│   │   └── domain
│   ├── domain B 
│   └── domain C
└── infra
```
